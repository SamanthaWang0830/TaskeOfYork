{"ast":null,"code":"var _jsxFileName = \"/Users/wzj/\\u524D\\u7AEFproject/project/tasteofyork/src/components/Header/Header.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Button, Breadcrumbs, Menu, MenuItem, Avatar } from \"@mui/material\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport { Outlet, Link } from \"react-router-dom\";\nimport './Header.css';\nimport { UserContext } from \"../../contexts/user-context\";\nimport useHttpClient from \"../../hooks/http-hook\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Header() {\n  _s();\n  const {\n    authSucceed,\n    setAuthSucceed,\n    userId\n  } = useContext(UserContext);\n  const [avatar, setAvatar] = useState();\n  //if window width change to below 600, then navigation should change to menu version\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  useEffect(() => {\n    const handleWindowResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n    window.addEventListener('resize', handleWindowResize);\n    return () => {\n      window.removeEventListener('resize', handleWindowResize);\n    };\n  });\n  const clickLogoutHandler = () => {\n    setAuthSucceed(false);\n  };\n  // Dropdown menu functionalities\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  //when user successfully authed, fetch\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const responseData = await sendRequest('http://localhost:7000/api/users');\n        const theSepcificUser = responseData.users.filter(user => user.id === userId);\n        setAvatar(theSepcificUser.image);\n      } catch (err) {}\n    };\n    fetchUsers();\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      class: \"headerContainer\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        style: {\n          textDecoration: \"none\"\n        },\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Taste of York\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-right\",\n        children: [authSucceed ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            src: `http://localhost:7000/${avatar}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: clickLogoutHandler,\n            children: \"Log Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              style: {\n                textDecoration: 'none',\n                color: 'gray'\n              },\n              to: `/${userId}/places`,\n              children: \"MyMeals\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              textDecoration: 'none',\n              color: 'gray'\n            },\n            to: \"/login\",\n            children: \"Auth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this), windowWidth < 600 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"menu-button\",\n            \"aria-controls\": open ? \"menu\" : undefined,\n            \"aria-haspopup\": \"true\",\n            \"aria-expanded\": open ? \"true\" : undefined,\n            onClick: handleClick,\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {\n              style: {\n                color: \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Menu, {\n            id: \"menu\",\n            anchorEl: anchorEl,\n            open: open,\n            onClose: handleClose,\n            MenuListProps: {\n              \"aria-labelledby\": \"menu-button\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              style: {\n                textDecoration: \"none\",\n                color: \"black\"\n              },\n              to: \"/findRestaurants\",\n              children: /*#__PURE__*/_jsxDEV(MenuItem, {\n                onClick: handleClose,\n                children: \"Restaurants\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              style: {\n                textDecoration: \"none\",\n                color: \"black\"\n              },\n              to: \"/studentsPicks\",\n              children: /*#__PURE__*/_jsxDEV(MenuItem, {\n                onClick: handleClose,\n                children: \"Student Picks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n          \"aria-label\": \"breadcrumb\",\n          sx: {\n            color: 'gray',\n            ml: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              textDecoration: \"none\",\n              color: 'gray'\n            },\n            to: \"/findRestaurants\",\n            children: \"Restaurants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              textDecoration: \"none\",\n              color: 'gray'\n            },\n            to: \"/studentsPicks\",\n            children: \"studentsPicks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Header, \"AyMFlJHx9ZpH0+3hadg+Fo9Xg+g=\");\n_c = Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Button","Breadcrumbs","Menu","MenuItem","Avatar","MenuIcon","Outlet","Link","UserContext","useHttpClient","Header","authSucceed","setAuthSucceed","userId","avatar","setAvatar","windowWidth","setWindowWidth","window","innerWidth","handleWindowResize","addEventListener","removeEventListener","clickLogoutHandler","anchorEl","setAnchorEl","open","Boolean","handleClick","event","currentTarget","handleClose","fetchUsers","responseData","sendRequest","theSepcificUser","users","filter","user","id","image","err","textDecoration","color","undefined","ml"],"sources":["/Users/wzj/前端project/project/tasteofyork/src/components/Header/Header.jsx"],"sourcesContent":["import React,{useState,useEffect, useContext} from \"react\";\nimport {Button, Breadcrumbs, Menu, MenuItem, Avatar}from \"@mui/material\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport { Outlet, Link } from \"react-router-dom\";\nimport './Header.css'\nimport { UserContext } from \"../../contexts/user-context\";\nimport useHttpClient from \"../../hooks/http-hook\";\n\nexport default function Header() {\n  const {authSucceed, setAuthSucceed,userId} = useContext(UserContext)\n  const [avatar,setAvatar]=useState()\n  //if window width change to below 600, then navigation should change to menu version\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  useEffect(() => {\n    const handleWindowResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n\n    window.addEventListener('resize', handleWindowResize);\n\n    return () => {\n      window.removeEventListener('resize', handleWindowResize);\n    };\n  });\n\n  const clickLogoutHandler=()=>{\n    setAuthSucceed(false)\n  }\n  // Dropdown menu functionalities\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  //when user successfully authed, fetch\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const responseData = await sendRequest(\n          'http://localhost:7000/api/users'\n        );\n        const theSepcificUser= responseData.users.filter(user=>user.id=== userId)\n        setAvatar(theSepcificUser.image)\n      } catch (err) {}\n    };\n    fetchUsers();\n  }, [userId]);\n\n  return (\n    <>\n      <header class=\"headerContainer\">\n        <Link style={{ textDecoration: \"none\" }} to=\"/\">\n          <h1>Taste of York</h1>\n        </Link>\n\n        <div className=\"header-right\">\n          {\n            authSucceed? (\n              <>\n                <Avatar src={`http://localhost:7000/${avatar}`}/>\n                <Button onClick={clickLogoutHandler}>Log Out</Button>\n                <h4>\n                  <Link style={{textDecoration: 'none', color:'gray'}} to={`/${userId}/places`} >MyMeals</Link>\n                </h4>\n              </>\n            ):(\n              <h3>\n                <Link style={{textDecoration: 'none', color:'gray'}} to=\"/login\" >Auth</Link>\n              </h3>\n            )\n          }\n          \n          {\n            windowWidth<600 ? (\n              <>\n                <Button\n                  id=\"menu-button\"\n                  aria-controls={open ? \"menu\" : undefined}\n                  aria-haspopup=\"true\"\n                  aria-expanded={open ? \"true\" : undefined}\n                  onClick={handleClick}\n                >\n                  <MenuIcon style={{ color: \"white\" }} />\n                </Button>\n                <Menu\n                  id=\"menu\"\n                  anchorEl={anchorEl}\n                  open={open}\n                  onClose={handleClose}\n                  MenuListProps={{\n                    \"aria-labelledby\": \"menu-button\",\n                  }}\n                >\n                  <Link\n                    style={{ textDecoration: \"none\", color: \"black\" }}\n                    to=\"/findRestaurants\"\n                  >\n                    <MenuItem onClick={handleClose}>Restaurants</MenuItem>\n                  </Link>\n                  <Link\n                    style={{ textDecoration: \"none\", color: \"black\" }}\n                    to=\"/studentsPicks\"\n                  >\n                    <MenuItem onClick={handleClose}>Student Picks</MenuItem>\n                  </Link>\n                </Menu>\n              </>\n            ):(\n              <Breadcrumbs aria-label=\"breadcrumb\" sx={{color:'gray', ml:2}}>\n                <Link\n                  style={{ textDecoration: \"none\", color:'gray'}}\n                  to=\"/findRestaurants\"\n                >\n                    Restaurants\n                </Link>\n                <Link\n                  style={{ textDecoration: \"none\",color:'gray'}}\n                  to=\"/studentsPicks\"\n                >\n                  studentsPicks\n                </Link>\n              </Breadcrumbs>\n            )\n          }\n          \n        </div>\n      </header>\n      <Outlet />\n\n    </>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAEC,QAAQ,EAACC,SAAS,EAAEC,UAAU,QAAO,OAAO;AAC1D,SAAQC,MAAM,EAAEC,WAAW,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,MAAM,QAAM,eAAe;AACxE,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,SAASC,MAAM,EAAEC,IAAI,QAAQ,kBAAkB;AAC/C,OAAO,cAAc;AACrB,SAASC,WAAW,QAAQ,6BAA6B;AACzD,OAAOC,aAAa,MAAM,uBAAuB;AAAC;AAAA;AAElD,eAAe,SAASC,MAAM,GAAG;EAAA;EAC/B,MAAM;IAACC,WAAW;IAAEC,cAAc;IAACC;EAAM,CAAC,GAAGd,UAAU,CAACS,WAAW,CAAC;EACpE,MAAM,CAACM,MAAM,EAACC,SAAS,CAAC,GAAClB,QAAQ,EAAE;EACnC;EACA,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGpB,QAAQ,CAACqB,MAAM,CAACC,UAAU,CAAC;EACjErB,SAAS,CAAC,MAAM;IACd,MAAMsB,kBAAkB,GAAG,MAAM;MAC/BH,cAAc,CAACC,MAAM,CAACC,UAAU,CAAC;IACnC,CAAC;IAEDD,MAAM,CAACG,gBAAgB,CAAC,QAAQ,EAAED,kBAAkB,CAAC;IAErD,OAAO,MAAM;MACXF,MAAM,CAACI,mBAAmB,CAAC,QAAQ,EAAEF,kBAAkB,CAAC;IAC1D,CAAC;EACH,CAAC,CAAC;EAEF,MAAMG,kBAAkB,GAAC,MAAI;IAC3BX,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC;EACD;EACA,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM6B,IAAI,GAAGC,OAAO,CAACH,QAAQ,CAAC;EAC9B,MAAMI,WAAW,GAAIC,KAAK,IAAK;IAC7BJ,WAAW,CAACI,KAAK,CAACC,aAAa,CAAC;EAClC,CAAC;EACD,MAAMC,WAAW,GAAG,MAAM;IACxBN,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;;EAED;EACA3B,SAAS,CAAC,MAAM;IACd,MAAMkC,UAAU,GAAG,YAAY;MAC7B,IAAI;QACF,MAAMC,YAAY,GAAG,MAAMC,WAAW,CACpC,iCAAiC,CAClC;QACD,MAAMC,eAAe,GAAEF,YAAY,CAACG,KAAK,CAACC,MAAM,CAACC,IAAI,IAAEA,IAAI,CAACC,EAAE,KAAI1B,MAAM,CAAC;QACzEE,SAAS,CAACoB,eAAe,CAACK,KAAK,CAAC;MAClC,CAAC,CAAC,OAAOC,GAAG,EAAE,CAAC;IACjB,CAAC;IACDT,UAAU,EAAE;EACd,CAAC,EAAE,CAACnB,MAAM,CAAC,CAAC;EAEZ,oBACE;IAAA,wBACE;MAAQ,KAAK,EAAC,iBAAiB;MAAA,wBAC7B,QAAC,IAAI;QAAC,KAAK,EAAE;UAAE6B,cAAc,EAAE;QAAO,CAAE;QAAC,EAAE,EAAC,GAAG;QAAA,uBAC7C;UAAA,UAAI;QAAa;UAAA;UAAA;UAAA;QAAA;MAAK;QAAA;QAAA;QAAA;MAAA,QACjB,eAEP;QAAK,SAAS,EAAC,cAAc;QAAA,WAEzB/B,WAAW,gBACT;UAAA,wBACE,QAAC,MAAM;YAAC,GAAG,EAAG,yBAAwBG,MAAO;UAAE;YAAA;YAAA;YAAA;UAAA,QAAE,eACjD,QAAC,MAAM;YAAC,OAAO,EAAES,kBAAmB;YAAA,UAAC;UAAO;YAAA;YAAA;YAAA;UAAA,QAAS,eACrD;YAAA,uBACE,QAAC,IAAI;cAAC,KAAK,EAAE;gBAACmB,cAAc,EAAE,MAAM;gBAAEC,KAAK,EAAC;cAAM,CAAE;cAAC,EAAE,EAAG,IAAG9B,MAAO,SAAS;cAAA,UAAE;YAAO;cAAA;cAAA;cAAA;YAAA;UAAO;YAAA;YAAA;YAAA;UAAA,QAC1F;QAAA,gBACJ,gBAEH;UAAA,uBACE,QAAC,IAAI;YAAC,KAAK,EAAE;cAAC6B,cAAc,EAAE,MAAM;cAAEC,KAAK,EAAC;YAAM,CAAE;YAAC,EAAE,EAAC,QAAQ;YAAA,UAAE;UAAI;YAAA;YAAA;YAAA;UAAA;QAAO;UAAA;UAAA;UAAA;QAAA,QAEhF,EAID3B,WAAW,GAAC,GAAG,gBACb;UAAA,wBACE,QAAC,MAAM;YACL,EAAE,EAAC,aAAa;YAChB,iBAAeU,IAAI,GAAG,MAAM,GAAGkB,SAAU;YACzC,iBAAc,MAAM;YACpB,iBAAelB,IAAI,GAAG,MAAM,GAAGkB,SAAU;YACzC,OAAO,EAAEhB,WAAY;YAAA,uBAErB,QAAC,QAAQ;cAAC,KAAK,EAAE;gBAAEe,KAAK,EAAE;cAAQ;YAAE;cAAA;cAAA;cAAA;YAAA;UAAG;YAAA;YAAA;YAAA;UAAA,QAChC,eACT,QAAC,IAAI;YACH,EAAE,EAAC,MAAM;YACT,QAAQ,EAAEnB,QAAS;YACnB,IAAI,EAAEE,IAAK;YACX,OAAO,EAAEK,WAAY;YACrB,aAAa,EAAE;cACb,iBAAiB,EAAE;YACrB,CAAE;YAAA,wBAEF,QAAC,IAAI;cACH,KAAK,EAAE;gBAAEW,cAAc,EAAE,MAAM;gBAAEC,KAAK,EAAE;cAAQ,CAAE;cAClD,EAAE,EAAC,kBAAkB;cAAA,uBAErB,QAAC,QAAQ;gBAAC,OAAO,EAAEZ,WAAY;gBAAA,UAAC;cAAW;gBAAA;gBAAA;gBAAA;cAAA;YAAW;cAAA;cAAA;cAAA;YAAA,QACjD,eACP,QAAC,IAAI;cACH,KAAK,EAAE;gBAAEW,cAAc,EAAE,MAAM;gBAAEC,KAAK,EAAE;cAAQ,CAAE;cAClD,EAAE,EAAC,gBAAgB;cAAA,uBAEnB,QAAC,QAAQ;gBAAC,OAAO,EAAEZ,WAAY;gBAAA,UAAC;cAAa;gBAAA;gBAAA;gBAAA;cAAA;YAAW;cAAA;cAAA;cAAA;YAAA,QACnD;UAAA;YAAA;YAAA;YAAA;UAAA,QACF;QAAA,gBACN,gBAEH,QAAC,WAAW;UAAC,cAAW,YAAY;UAAC,EAAE,EAAE;YAACY,KAAK,EAAC,MAAM;YAAEE,EAAE,EAAC;UAAC,CAAE;UAAA,wBAC5D,QAAC,IAAI;YACH,KAAK,EAAE;cAAEH,cAAc,EAAE,MAAM;cAAEC,KAAK,EAAC;YAAM,CAAE;YAC/C,EAAE,EAAC,kBAAkB;YAAA,UACtB;UAED;YAAA;YAAA;YAAA;UAAA,QAAO,eACP,QAAC,IAAI;YACH,KAAK,EAAE;cAAED,cAAc,EAAE,MAAM;cAACC,KAAK,EAAC;YAAM,CAAE;YAC9C,EAAE,EAAC,gBAAgB;YAAA,UACpB;UAED;YAAA;YAAA;YAAA;UAAA,QAAO;QAAA;UAAA;UAAA;UAAA;QAAA,QAEV;MAAA;QAAA;QAAA;QAAA;MAAA,QAGC;IAAA;MAAA;MAAA;MAAA;IAAA,QACC,eACT,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA,gBAET;AAEP;AAAC,GA/HuBjC,MAAM;AAAA,KAANA,MAAM;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}